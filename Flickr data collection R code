library(installr)
library(devtools)
library(rgdal)
library(sf)
library(raster)
library(photosearcher)
getwd()
setwd("D:/EcosystemServices/practical")
getwd()
#UTcampus

write.table("ad6dd59802228bda5bc4a35a02397d48", file = "photosearcher_key.sysdata") #write a table with your key

Tana = readOGR(dsn =  ".", "BasinBoundary", encoding = 'ESRI') # the boundaries of the Region of Interest
ROI = st_as_sf(Tana) # tranform the loaded map into a sf object, which the format the photo_searcher function "understands" it
plot(Tana) # plot to check

# the following function is the main function of this work. It downloads from FLICKR a list of photographs uploaded 
#to FLICKR and taken within the boundaries of the Region of Interest

output_points = photo_search(
  mindate_taken = "2016-01-01",
  maxdate_taken = "2019-11-29",
  has_geo = T,
  sf_layer = ROI,
  tags_any = FALSE
)

str(output_points) #check columns and data

myvars <- names(output_points) %in% c("tags", "description") # select not needed columns
output <- output_points[!myvars] # drop not needed columns
str(output) # check output

#write to csv file and load in GIS
write.csv(output, "Tana.csv", row.names = F)
